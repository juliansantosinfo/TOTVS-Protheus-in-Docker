# ==============================================================================
#                     ARQUIVO DE CONFIGURAÇÃO DE AMBIENTE
# ==============================================================================
#
# Este arquivo centraliza todas as variáveis de ambiente utilizadas pelos
# serviços Docker do ecossistema TOTVS Protheus.
#
# COMO USAR:
# 1. Copie este arquivo para .env (docker-compose o usará automaticamente).
# 2. Descomente e ajuste as variáveis conforme sua necessidade.
#
# ==============================================================================

# ------------------------------------------------------------------------------
# I. CONFIGURAÇÕES GERAIS
# ------------------------------------------------------------------------------

# Define o Timezone para todos os containers, garantindo consistência de horário.
# Exemplo: America/Sao_Paulo, America/New_York, Europe/London
TZ=America/Sao_Paulo

# Controla se os recursos (binários, dados) devem ser extraídos ao iniciar
# os containers 'appserver' e 'smartview'.
# "true": Extrai os arquivos .tar.gz na primeira inicialização.
# "false": Pula a extração (útil se os dados já existem em volumes).
EXTRACT_RESOURCES=true

# Controla a restauração de backups para os bancos de dados MSSQL e PostgreSQL.
# "Y" ou "y": Restaura o banco de dados a partir do arquivo de backup se o
#             diretório de dados estiver vazio.
# Qualquer outro valor: Pula a restauração.
RESTORE_BACKUP=Y


# ------------------------------------------------------------------------------
# II. CONFIGURAÇÕES DE BANCO DE DADOS (MSSQL & POSTGRESQL)
# ------------------------------------------------------------------------------
# Define a senha principal para os usuários administradores do banco de dados.
# - Para MSSQL: usuário 'sa'
# - Para PostgreSQL: usuário 'postgres'
DATABASE_PASSWORD=ProtheusDatabasePassword1

# Alias do banco de dados Protheus, utilizado pelo DBAccess e AppServer.
DATABASE_ALIAS=protheus

# Nome do banco de dados principal do Protheus.
DATABASE_NAME=protheus

# (Apenas MSSQL) Aceitação da licença de uso do Microsoft SQL Server.
# É obrigatório definir como "Y" para o container funcionar.
ACCEPT_EULA=Y

# (Apenas PostgreSQL) Argumentos para inicialização do banco de dados.
# Define o locale e encoding para compatibilidade com Protheus.
POSTGRES_INITDB_ARGS=--locale=pt_BR.ISO-8859-1 -E LATIN1


# ------------------------------------------------------------------------------
# III. CONFIGURAÇÕES DO TOTVS LICENSE SERVER
# ------------------------------------------------------------------------------

# Porta TCP para comunicação interna do License Server.
LICENSE_TCP_PORT=2234

# Porta principal de serviço do License Server.
LICENSE_PORT=5555

# Porta para a interface de gerenciamento web do License Server.
LICENSE_WEBAPP_PORT=8020

# Caminho do arquivo de log do console do License Server.
LICENSE_CONSOLEFILE=/totvs/licenseserver/bin/appserver/licenseserver.log


# ------------------------------------------------------------------------------
# IV. CONFIGURAÇÕES DO TOTVS APPSERVER (SERVIÇOS 'appserver' E 'apprest')
# ------------------------------------------------------------------------------

# Define o modo de operação do AppServer.
# - "application": Para uso com SmartClient (desktop) e Web.
# - "rest": Otimizado para serviços REST/API.
# - "sqlite": Configuração para usar SQLite como banco de dados local.
APPSERVER_MODE=application

# Caminho para o repositório de objetos customizado (.rpo).
APPSERVER_RPO_CUSTOM=/totvs/protheus/apo/custom.rpo

# Tipo do banco de dados a ser conectado (via DBAccess).
# - "MSSQL" ou "POSTGRES"
APPSERVER_DBACCESS_DATABASE=MSSQL

# Host/nome do container do serviço DBAccess.
APPSERVER_DBACCESS_SERVER=totvs_dbaccess

# Porta do serviço DBAccess.
APPSERVER_DBACCESS_PORT=7890

# Alias do Protheus configurado no DBAccess.
APPSERVER_DBACCESS_ALIAS=${DATABASE_ALIAS}

# Porta principal de conexão do AppServer.
APPSERVER_PORT=25001

# Porta para conexões Web/SmartClient.
APPSERVER_WEB_PORT=25002

# Porta principal de conexão do AppServer para o serviço REST.
APPSERVER_REST_PORT=25101

# Porta para conexões Web/SmartClient para o serviço REST.
APPSERVER_REST_WEB_PORT=25102

# Porta para o serviço REST (quando APPSERVER_MODE=rest).
APPSERVER_REST_PORT=8080

# Porta para a interface de gerenciamento web do AppServer.
APPSERVER_WEB_MANAGER=8088

# Caminho do arquivo de log do console do AppServer.
APPSERVER_CONSOLEFILE=/totvs/protheus/bin/appserver/appserver.log

# Configurações do protocolo MultiProtocolPort.
APPSERVER_MULTIPROTOCOLPORT=1
APPSERVER_MULTIPROTOCOLPORTSECURE=0

# Host/nome do container do License Server.
APPSERVER_LICENSE_SERVER=totvs_licenseserver

# Porta do serviço do License Server.
APPSERVER_LICENSE_PORT=5555

# Configurações para o ambiente de arquivos locais (quando usado).
# Usado para tabelas de dicionário em memória com SQLite.
APPSERVER_ENVIRONMENT_LOCALFILES=SQLITE
APPSERVER_SQLITE_SERVER=totvs_appsqlite
APPSERVER_SQLITE_PORT=12346
APPSERVER_SQLITE_INSTANCES="1,10,1,1"
